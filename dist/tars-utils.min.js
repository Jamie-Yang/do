/*
 * tars-utils
 * https://github.com/Jamie-Yang/tars-utils.git
 * version 1.0.1
 */
!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports):"function"==typeof define&&define.amd?define(["exports"],t):t((e=e||self).tars={})}(this,(function(e){"use strict";var t=0;function n(e){var n=Date.now(),r=Math.max(t+16,n);return setTimeout((function(){e(t=r)}),r-n)}function r(e){return e?window.navigator.userAgent.toLowerCase():window.navigator.userAgent}function o(){return/iPhone/.test(r())}var i=document.documentElement,u=document.body;var a=document.documentElement,c=document.body;var l=document.documentElement,d=document.body;var f=document.documentElement;var s=document.documentElement;function m(){return"#"+("00000"+(~~(Math.random()*(1<<24))).toString(16)).slice(-6)}function g(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function h(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function p(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?h(Object(n),!0).forEach((function(t){g(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):h(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function v(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0,n={year:0,month:0,date:0,day:0,hour:0,minute:0,second:0,millisecond:0},r=p(p({},n),e),o={"Y+":r.year,"M+":r.month,"D+":r.date,"H+":r.hour,"m+":r.minute,"s+":r.second,"S+":r.millisecond,d:r.day},i=t;for(var u in o)if(new RegExp("(".concat(u,")")).test(t)){var a=void 0;a="d"===u?o[u]:("00"+o[u]).slice(-RegExp.$1.length),i=i.replace(RegExp.$1,a)}return i}function w(e){return Object.prototype.toString.call(e).slice(8,-1).toLowerCase()}function y(e){return"object"===w(e)}function x(e,t,n){var r,o,i,u,a,c,l=0,d=!1,f=!1,s=!0;if("function"!=typeof e)throw new TypeError("Expected a function");function m(t){var n=r,i=o;return r=o=void 0,l=t,u=e.apply(i,n)}function g(e){return l=e,a=setTimeout(p,t),d?m(e):u}function h(e){var n=e-c;return void 0===c||n>=t||n<0||f&&e-l>=i}function p(){var e=Date.now();if(h(e))return v(e);a=setTimeout(p,function(e){var n=e-l,r=t-(e-c);return f?Math.min(r,i-n):r}(e))}function v(e){return a=void 0,s&&r?m(e):(r=o=void 0,u)}function w(){for(var e=Date.now(),n=h(e),i=arguments.length,l=new Array(i),d=0;d<i;d++)l[d]=arguments[d];if(r=l,o=this,c=e,n){if(void 0===a)return g(c);if(f)return clearTimeout(a),a=setTimeout(p,t),m(c)}return void 0===a&&(a=setTimeout(p,t)),u}return t=Number(t)||0,y(n)&&(d=!!n.leading,i=(f="maxWait"in n)?Math.max(Number(n.maxWait)||0,t):i,s="trailing"in n?!!n.trailing:s),w.cancel=function(){void 0!==a&&clearTimeout(a),l=0,r=c=o=a=void 0},w.flush=function(){return void 0===a?u:v(Date.now())},w}function b(e,t){return Object.keys(e).filter((function(e){return!t.includes(e)})).reduce((function(t,n){return t[n]=e[n],t}),{})}function O(e,t){return t.reduce((function(t,n){return n in e&&(t[n]=e[n]),t}),{})}function A(e){return e.replace(/([a-z0-9])([A-Z])/g,"$1_$2").toLowerCase()}function P(e){return(e.match(/([^?=&]+)(=([^&]*))/g)||[]).reduce((function(e,t){var n=t.split("=");return e[decodeURIComponent(n[0])]=decodeURIComponent(n[1]),e}),{})}function M(e){var t="",n=e.indexOf("#");return-1!==n&&(t=e.slice(n)),t}function E(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:window.location.href;return P(M(e))}function S(e){var t=e,n=e.indexOf("#");return-1!==n&&(t=e.slice(0,n)),t}function T(e){var t=S(e),n=t.indexOf("?");return-1===n?"":t.slice(n+1)}function j(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:window.location.href;return P(T(e))}function R(e){return{url:S(e).split("?")[0],query:j(e),hash:M(e)}}function C(e){if(!e)return"";var t=[];for(var n in e)e.hasOwnProperty(n)&&t.push("".concat(encodeURIComponent(n),"=").concat(encodeURIComponent(e[n])));return t.join("&")}function F(e){var t,n=e.url,r=e.query,o=e.hash,i=C(p(p({},j(n=S(n).split("?")[0])),r)),u=i?"?".concat(i):"",a=M(n);return o=null!==(t=o)&&void 0!==t?t:a,"".concat(n).concat(u).concat(o)}var q={chunk:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;return Array.from({length:Math.ceil(e.length/t)},(function(n,r){return e.slice(r*t,r*t+t)}))},requestAnimFrame:function(e){return(window.requestAnimationFrame||window.webkitRequestAnimationFrame||n)(e)},cancelAnimFrame:function(e){(window.cancelAnimationFrame||window.webkitCancelAnimationFrame||window.clearTimeout)(e)},isAndroid:function(){return/Android/i.test(r())},isIOS:function(){return/iPhone|iPad|iPod/.test(r())},isIPad:function(){return/iPad/.test(r())},isIPhone:o,isNotchIPhone:function(){if(!o())return!1;if("undefined"!=typeof window&&window){var e=window,t=e.devicePixelRatio,n=e.screen,r=n.width,i=n.height;return[{dpr:3,width:375,height:812},{dpr:3,width:414,height:896},{dpr:2,width:414,height:896}].some((function(e){return e.dpr===t&&e.width===r&&e.height===i}))}return!1},isWeixin:function(){return/MicroMessenger/i.test(r())},ua:r,getPageHeight:function(){return Math.max(i.scrollHeight,u.scrollHeight,i.clientHeight)},getPageWidth:function(){return Math.max(a.scrollWidth,c.scrollWidth,a.clientWidth)},getPageScrollTop:function(){return l.scrollTop||d.scrollTop},getStyle:function(e,t){return getComputedStyle(e)[t]},getViewHeight:function(){return f.clientHeight},getViewWidth:function(){return s.clientWidth},isElementVisible:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=e.getBoundingClientRect(),r=n.top,o=n.left,i=n.bottom,u=n.right,a=window,c=a.innerHeight,l=a.innerWidth;return t?(r>0&&r<c||i>0&&i<c)&&(o>0&&o<l||u>0&&u<l):r>=0&&o>=0&&i<=c&&u<=l},lockTouch:function(){function e(e,t){return e.target.tagName!==t.toUpperCase()&&e.target.tagName!==t.toLowerCase()}function t(t){e(t,"input")&&e(t,"textarea")&&e(t,"select")&&e(t,"menus")&&t.preventDefault()}document.addEventListener("touchmove",(function(e){e.preventDefault()})),document.addEventListener("touchstart",t),document.addEventListener("touchend",t)},outlineElements:function(){document.querySelectorAll("*").forEach((function(e){e.style.outline="1px solid "+m}))},putCursorAtEnd:function(e){if(e.focus(),e.setSelectionRange){var t=2*e.value.length;setTimeout((function(){e.setSelectionRange(t,t)}),0)}else e.value=e.value;e.scrollTop=999999},scrollTo:function(e){window.requestAnimationFrame||(window.requestAnimationFrame=window.webkitRequestAnimationFrame||function(e){window.setTimeout(e,1e3/60)});var t=e.el,n=void 0===t?window:t,r=e.from,o=void 0===r?0:r,i=e.to,u=e.duration,a=void 0===u?500:u,c=e.onEnd,l=Math.abs(o-i);!function e(t,r,o){if(t!==r){var i=t+o>r?r:t+o;t>r&&(i=t-o<r?r:t-o),n===window?window.scrollTo(0,i):n.scrollTop=i,window.requestAnimationFrame((function(){return e(i,r,o)}))}else c&&c()}(o,i,Math.ceil(l/a*50))},setStyle:function(e,t,n){e.style[t]=n},formatAmount:function(e){var t=Number(e);return isNaN(t)?e:t.toFixed(2).replace(/\d{1,3}(?=(\d{3})+(\.\d*)?$)/g,"$&,")},formatBankCard:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:" ",n=e.toString().replace(/\s/g,"");return n.replace(/(\d{4})(?=\d)/g,"$1".concat(t))},formatDate:function(e,t){return v({year:e.getFullYear(),month:e.getMonth()+1,date:e.getDate(),hour:e.getHours(),minute:e.getMinutes(),second:e.getSeconds(),millisecond:e.getMilliseconds()},t)},formatRemainTime:function(e,t){return v({day:Math.floor(e/864e5),hour:Math.floor(e%864e5/36e5),minute:Math.floor(e%36e5/6e4),second:Math.floor(e%6e4/1e3),millisecond:Math.floor(e%1e3)},t)},formatTel:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:" ",n=e.toString().replace(/\s/g,"");return/(\d{3})(\d{4})(\d{4})/.test(n)?"".concat(RegExp.$1).concat(t).concat(RegExp.$2).concat(t).concat(RegExp.$3):e},compose:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return 0===t.length?function(e){return e}:1===t.length?t[0]:t.reduce((function(e,t){return function(){return e(t.apply(void 0,arguments))}}))},debounce:x,throttle:function(e,t,n){var r=!0,o=!0;if("function"!=typeof e)throw new TypeError("Expected a function");return y(n)&&(r="leading"in n?!!n.leading:r,o="trailing"in n?!!n.trailing:o),x(e,t,{leading:r,maxWait:t,trailing:o})},optimizeImage:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:.9,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=n.maxWidth,o=void 0===r?750:r,i=n.mimeType;return new Promise((function(n,r){if(e instanceof File){var u=new FileReader;u.onload=function(){a(this.result)},u.readAsDataURL(e)}else"string"==typeof e&&a(e);function a(u){var a=u.match(/data:([^;,]+)/);if(Array.isArray(a)){if("image/gif"===(i||a[1]))return n(e);var c=new Image;c.src=u,c.onload=function(){var e=this.naturalWidth,r=this.naturalHeight;e>o&&(r=Math.round(o*r/e),e=o);var u=document.createElement("canvas");u.width=e,u.height=r,u.getContext("2d").drawImage(this,0,0,e,r),u.toBlob((function(e){n(e)}),i||a[1],t)}}else r(new Error("[Slug Function] Non-picture type Data URLs"))}}))},getType:w,isArray:function(e){return"array"===w(e)},isBoolean:function(e){return"boolean"===w(e)},isEmpty:function(e){return null===e||!(Object.keys(e)||e).length},isFunction:function(e){return"function"===w(e)},isMap:function(e){return"map"===w(e)},isNumber:function(e){return"number"===w(e)},isObject:y,isSet:function(e){return"set"===w(e)},isString:function(e){return"string"===w(e)},extend:function e(t){for(var n=arguments.length,r=new Array(n>1?n-1:0),o=1;o<n;o++)r[o-1]=arguments[o];return[].concat(r).reduce((function(t,n){return Object.keys(n).reduce((function(r,o){var i=n[o];return Array.isArray(i)?t[o]=e([],i):t[o]=i instanceof Object?e({},i):i,t}),{})}),t)},merge:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return[].concat(t).reduce((function(e,t){return Object.keys(t).reduce((function(n,r){return e[r]=e.hasOwnProperty(r)?[].concat(e[r]).concat(t[r]):t[r],e}),{})}),{})},omit:b,pick:O,randomA2B:function(e,t,n){var r=Math.random()*(t-e)+e;return n?Math.floor(r):r},randomColor:m,randomString:function(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:32,t="ABCDEFGHIJKLMNOPQRSTUVWXTZabcdefghiklmnopqrstuvwxyz0123456789",n="",r=0;r<e;r++)n+=t.charAt(Math.floor(Math.random()*t.length));return n},uuid:function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(function(e){var t=16*Math.random()|0;return("x"===e?t:3&t|8).toString(16)}))},camelize:function(e){return e.indexOf("-")<0&&e.indexOf("_")<0?e:e.replace(/[-_][^-_]/g,(function(e){return e.charAt(1).toUpperCase()}))},dasherize:function(e){return A(e).replace(/_/g,"-")},getBase64Size:function(e){var t=e.length,n=t-t/8*2;return Math.ceil(n/1024)},stripTags:function(e){return e.replace(/<script[^>]*>(\S\s*?)<\/script>/gim,"").replace(/<[^>]+>/g,"")},underscored:A,xssFilter:function(e){return e.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#x27;")},getHashParam:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:window.location.href;return E(t)[e]},getHashParams:E,getSearchParam:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:window.location.href;return j(t)[e]},getSearchParams:j,removeHash:S,getHash:M,getSearch:T,omitParams:function(e,t){var n=R(e),r=b(n.query,t);return F(p(p({},n),{},{query:r}))},pickParams:function(e,t){var n=R(e),r=O(n.query,t);return F(p(p({},n),{},{query:r}))},parseQuery:P,stringifyQuery:C,parseUrl:R,stringifyUrl:F};e.default=q,e.tars=q,Object.defineProperty(e,"__esModule",{value:!0})}));
//# sourceMappingURL=tars-utils.min.js.map
