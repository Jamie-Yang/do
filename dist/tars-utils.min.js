/*
 * tars-utils
 * https://github.com/Jamie-Yang/tars-utils.git
 * version 1.0.1
 */
!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports):"function"==typeof define&&define.amd?define(["exports"],t):t((e=e||self).tars={})}(this,(function(e){"use strict";function t(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;return Array.from({length:Math.ceil(e.length/t)},(function(n,r){return e.slice(r*t,r*t+t)}))}var n=0;function r(e){var t=Date.now(),r=Math.max(n+16,t);return setTimeout((function(){e(n=r)}),r-t)}function i(e){return(window.requestAnimationFrame||window.webkitRequestAnimationFrame||r)(e)}function o(e){(window.cancelAnimationFrame||window.webkitCancelAnimationFrame||window.clearTimeout)(e)}function a(e){return e?window.navigator.userAgent.toLowerCase():window.navigator.userAgent}function u(){return/Android/i.test(a())}function c(){return/iPhone|iPad|iPod/.test(a())}function l(){return/iPad/.test(a())}function s(){return/iPhone/.test(a())}function d(){if(!s())return!1;if("undefined"!=typeof window&&window){var e=window,t=e.devicePixelRatio,n=e.screen,r=n.width,i=n.height;return[{dpr:3,width:375,height:812},{dpr:3,width:414,height:896},{dpr:2,width:414,height:896}].some((function(e){return e.dpr===t&&e.width===r&&e.height===i}))}return!1}function f(){return/MicroMessenger/i.test(a())}var m=document.documentElement,g=document.body;function h(){return Math.max(m.scrollHeight,g.scrollHeight,m.clientHeight)}var p=document.documentElement,v=document.body;function w(){return Math.max(p.scrollWidth,v.scrollWidth,p.clientWidth)}var y=document.documentElement,x=document.body;function b(){return y.scrollTop||x.scrollTop}function P(e,t){return getComputedStyle(e)[t]}var A=document.documentElement;function S(){return A.clientHeight}var O=document.documentElement;function T(){return O.clientWidth}function E(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=e.getBoundingClientRect(),r=n.top,i=n.left,o=n.bottom,a=n.right,u=window,c=u.innerHeight,l=u.innerWidth;return t?(r>0&&r<c||o>0&&o<c)&&(i>0&&i<l||a>0&&a<l):r>=0&&i>=0&&o<=c&&a<=l}function M(){function e(e,t){return e.target.tagName!==t.toUpperCase()&&e.target.tagName!==t.toLowerCase()}function t(t){e(t,"input")&&e(t,"textarea")&&e(t,"select")&&e(t,"menus")&&t.preventDefault()}document.addEventListener("touchmove",(function(e){e.preventDefault()})),document.addEventListener("touchstart",t),document.addEventListener("touchend",t)}function j(){return"#"+("00000"+(~~(Math.random()*(1<<24))).toString(16)).slice(-6)}function F(){document.querySelectorAll("*").forEach((function(e){e.style.outline="1px solid "+j}))}function R(e){if(e.focus(),e.setSelectionRange){var t=2*e.value.length;setTimeout((function(){e.setSelectionRange(t,t)}),0)}else e.value=e.value;e.scrollTop=999999}function C(e){window.requestAnimationFrame||(window.requestAnimationFrame=window.webkitRequestAnimationFrame||function(e){window.setTimeout(e,1e3/60)});var t=e.el,n=void 0===t?window:t,r=e.from,i=void 0===r?0:r,o=e.to,a=e.duration,u=void 0===a?500:a,c=e.onEnd,l=Math.abs(i-o);!function e(t,r,i){if(t!==r){var o=t+i>r?r:t+i;t>r&&(o=t-i<r?r:t-i),n===window?window.scrollTo(0,o):n.scrollTop=o,window.requestAnimationFrame((function(){return e(o,r,i)}))}else c&&c()}(i,o,Math.ceil(l/u*50))}function H(e,t,n){e.style[t]=n}function k(e){var t=Number(e);return isNaN(t)?e:t.toFixed(2).replace(/\d{1,3}(?=(\d{3})+(\.\d*)?$)/g,"$&,")}function q(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:" ",n=e.toString().replace(/\s/g,"");return n.replace(/(\d{4})(?=\d)/g,"$1".concat(t))}function D(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function I(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function W(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?I(Object(n),!0).forEach((function(t){D(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):I(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function N(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0,n={year:0,month:0,date:0,day:0,hour:0,minute:0,second:0,millisecond:0},r=W(W({},n),e),i={"Y+":r.year,"M+":r.month,"D+":r.date,"H+":r.hour,"m+":r.minute,"s+":r.second,"S+":r.millisecond,d:r.day},o=t;for(var a in i)if(new RegExp("(".concat(a,")")).test(t)){var u=void 0;u="d"===a?i[a]:("00"+i[a]).slice(-RegExp.$1.length),o=o.replace(RegExp.$1,u)}return o}function U(e,t){return N({year:e.getFullYear(),month:e.getMonth()+1,date:e.getDate(),hour:e.getHours(),minute:e.getMinutes(),second:e.getSeconds(),millisecond:e.getMilliseconds()},t)}function B(e,t){return N({day:Math.floor(e/864e5),hour:Math.floor(e%864e5/36e5),minute:Math.floor(e%36e5/6e4),second:Math.floor(e%6e4/1e3),millisecond:Math.floor(e%1e3)},t)}function z(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:" ",n=e.toString().replace(/\s/g,"");return/(\d{3})(\d{4})(\d{4})/.test(n)?"".concat(RegExp.$1).concat(t).concat(RegExp.$2).concat(t).concat(RegExp.$3):e}function L(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return 0===t.length?function(e){return e}:1===t.length?t[0]:t.reduce((function(e,t){return function(){return e(t.apply(void 0,arguments))}}))}function $(e){return Object.prototype.toString.call(e).slice(8,-1).toLowerCase()}function V(e){return"object"===$(e)}function _(e,t,n){var r,i,o,a,u,c,l=0,s=!1,d=!1,f=!0;if("function"!=typeof e)throw new TypeError("Expected a function");function m(t){var n=r,o=i;return r=i=void 0,l=t,a=e.apply(o,n)}function g(e){return l=e,u=setTimeout(p,t),s?m(e):a}function h(e){var n=e-c;return void 0===c||n>=t||n<0||d&&e-l>=o}function p(){var e=Date.now();if(h(e))return v(e);u=setTimeout(p,function(e){var n=e-l,r=t-(e-c);return d?Math.min(r,o-n):r}(e))}function v(e){return u=void 0,f&&r?m(e):(r=i=void 0,a)}function w(){for(var e=Date.now(),n=h(e),o=arguments.length,l=new Array(o),s=0;s<o;s++)l[s]=arguments[s];if(r=l,i=this,c=e,n){if(void 0===u)return g(c);if(d)return clearTimeout(u),u=setTimeout(p,t),m(c)}return void 0===u&&(u=setTimeout(p,t)),a}return t=Number(t)||0,V(n)&&(s=!!n.leading,o=(d="maxWait"in n)?Math.max(Number(n.maxWait)||0,t):o,f="trailing"in n?!!n.trailing:f),w.cancel=function(){void 0!==u&&clearTimeout(u),l=0,r=c=i=u=void 0},w.flush=function(){return void 0===u?a:v(Date.now())},w}function Q(e,t,n){var r=!0,i=!0;if("function"!=typeof e)throw new TypeError("Expected a function");return V(n)&&(r="leading"in n?!!n.leading:r,i="trailing"in n?!!n.trailing:i),_(e,t,{leading:r,maxWait:t,trailing:i})}function Y(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:.9,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=n.maxWidth,i=void 0===r?750:r,o=n.mimeType;return new Promise((function(n,r){if(e instanceof File){var a=new FileReader;a.onload=function(){u(this.result)},a.readAsDataURL(e)}else"string"==typeof e&&u(e);function u(a){var u=a.match(/data:([^;,]+)/);if(Array.isArray(u)){if("image/gif"===(o||u[1]))return n(e);var c=new Image;c.src=a,c.onload=function(){var e=this.naturalWidth,r=this.naturalHeight;e>i&&(r=Math.round(i*r/e),e=i);var a=document.createElement("canvas");a.width=e,a.height=r,a.getContext("2d").drawImage(this,0,0,e,r),a.toBlob((function(e){n(e)}),o||u[1],t)}}else r(new Error("[Slug Function] Non-picture type Data URLs"))}}))}function Z(e){return"array"===$(e)}function G(e){return"boolean"===$(e)}function J(e){return null===e||!(Object.keys(e)||e).length}function K(e){return"function"===$(e)}function X(e){return"map"===$(e)}function ee(e){return"number"===$(e)}function te(e){return"set"===$(e)}function ne(e){return"string"===$(e)}function re(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return[].concat(n).reduce((function(e,t){return Object.keys(t).reduce((function(n,r){var i=t[r];return Array.isArray(i)?e[r]=re([],i):e[r]=i instanceof Object?re({},i):i,e}),{})}),e)}function ie(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return[].concat(t).reduce((function(e,t){return Object.keys(t).reduce((function(n,r){return e[r]=e.hasOwnProperty(r)?[].concat(e[r]).concat(t[r]):t[r],e}),{})}),{})}function oe(e,t){return Object.keys(e).filter((function(e){return!t.includes(e)})).reduce((function(t,n){return t[n]=e[n],t}),{})}function ae(e,t){return t.reduce((function(t,n){return n in e&&(t[n]=e[n]),t}),{})}function ue(e,t,n){var r=Math.random()*(t-e)+e;return n?Math.floor(r):r}function ce(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:32,t="ABCDEFGHIJKLMNOPQRSTUVWXTZabcdefghiklmnopqrstuvwxyz0123456789",n="",r=0;r<e;r++)n+=t.charAt(Math.floor(Math.random()*t.length));return n}function le(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(function(e){var t=16*Math.random()|0;return("x"===e?t:3&t|8).toString(16)}))}function se(e){return e.indexOf("-")<0&&e.indexOf("_")<0?e:e.replace(/[-_][^-_]/g,(function(e){return e.charAt(1).toUpperCase()}))}function de(e){return e.replace(/([a-z0-9])([A-Z])/g,"$1_$2").toLowerCase()}function fe(e){return de(e).replace(/_/g,"-")}function me(e){var t=e.length,n=t-t/8*2;return Math.ceil(n/1024)}function ge(e){return e.replace(/<script[^>]*>(\S\s*?)<\/script>/gim,"").replace(/<[^>]+>/g,"")}function he(e){return e.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#x27;")}function pe(e){return(e.match(/([^?=&]+)(=([^&]*))/g)||[]).reduce((function(e,t){var n=t.split("=");return e[decodeURIComponent(n[0])]=decodeURIComponent(n[1]),e}),{})}function ve(e){var t="",n=e.indexOf("#");return-1!==n&&(t=e.slice(n)),t}function we(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:window.location.href;return pe(ve(e))}function ye(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:window.location.href;return we(t)[e]}function xe(e){var t=e,n=e.indexOf("#");return-1!==n&&(t=e.slice(0,n)),t}function be(e){var t=xe(e),n=t.indexOf("?");return-1===n?"":t.slice(n+1)}function Pe(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:window.location.href;return pe(be(e))}function Ae(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:window.location.href;return Pe(t)[e]}function Se(e){return{url:xe(e).split("?")[0],query:Pe(e),hash:ve(e)}}function Oe(e){if(!e)return"";var t=[];for(var n in e)e.hasOwnProperty(n)&&t.push("".concat(encodeURIComponent(n),"=").concat(encodeURIComponent(e[n])));return t.join("&")}function Te(e){var t,n=e.url,r=e.query,i=e.hash,o=Oe(W(W({},Pe(n=xe(n).split("?")[0])),r)),a=o?"?".concat(o):"",u=ve(n);return i=null!==(t=i)&&void 0!==t?t:u,"".concat(n).concat(a).concat(i)}function Ee(e,t){var n=Se(e),r=oe(n.query,t);return Te(W(W({},n),{},{query:r}))}function Me(e,t){var n=Se(e),r=ae(n.query,t);return Te(W(W({},n),{},{query:r}))}var je={chunk:t,requestAnimFrame:i,cancelAnimFrame:o,isAndroid:u,isIOS:c,isIPad:l,isIPhone:s,isNotchIPhone:d,isWeixin:f,ua:a,getPageHeight:h,getPageWidth:w,getPageScrollTop:b,getStyle:P,getViewHeight:S,getViewWidth:T,isElementVisible:E,lockTouch:M,outlineElements:F,putCursorAtEnd:R,scrollTo:C,setStyle:H,formatAmount:k,formatBankCard:q,formatDate:U,formatRemainTime:B,formatTel:z,compose:L,debounce:_,throttle:Q,optimizeImage:Y,getType:$,isArray:Z,isBoolean:G,isEmpty:J,isFunction:K,isMap:X,isNumber:ee,isObject:V,isSet:te,isString:ne,extend:re,merge:ie,omit:oe,pick:ae,randomA2B:ue,randomColor:j,randomString:ce,uuid:le,camelize:se,dasherize:fe,getBase64Size:me,stripTags:ge,underscored:de,xssFilter:he,getHashParam:ye,getHashParams:we,getSearchParam:Ae,getSearchParams:Pe,removeHash:xe,getHash:ve,getSearch:be,omitParams:Ee,pickParams:Me,parseQuery:pe,stringifyQuery:Oe,parseUrl:Se,stringifyUrl:Te};e.camelize=se,e.cancelAnimFrame=o,e.chunk=t,e.compose=L,e.dasherize=fe,e.debounce=_,e.default=je,e.extend=re,e.formatAmount=k,e.formatBankCard=q,e.formatDate=U,e.formatRemainTime=B,e.formatTel=z,e.getBase64Size=me,e.getHash=ve,e.getHashParam=ye,e.getHashParams=we,e.getPageHeight=h,e.getPageScrollTop=b,e.getPageWidth=w,e.getSearch=be,e.getSearchParam=Ae,e.getSearchParams=Pe,e.getStyle=P,e.getType=$,e.getViewHeight=S,e.getViewWidth=T,e.isAndroid=u,e.isArray=Z,e.isBoolean=G,e.isElementVisible=E,e.isEmpty=J,e.isFunction=K,e.isIOS=c,e.isIPad=l,e.isIPhone=s,e.isMap=X,e.isNotchIPhone=d,e.isNumber=ee,e.isObject=V,e.isSet=te,e.isString=ne,e.isWeixin=f,e.lockTouch=M,e.merge=ie,e.omit=oe,e.omitParams=Ee,e.optimizeImage=Y,e.outlineElements=F,e.parseQuery=pe,e.parseUrl=Se,e.pick=ae,e.pickParams=Me,e.putCursorAtEnd=R,e.randomA2B=ue,e.randomColor=j,e.randomString=ce,e.removeHash=xe,e.requestAnimFrame=i,e.scrollTo=C,e.setStyle=H,e.stringifyQuery=Oe,e.stringifyUrl=Te,e.stripTags=ge,e.throttle=Q,e.ua=a,e.underscored=de,e.uuid=le,e.xssFilter=he,Object.defineProperty(e,"__esModule",{value:!0})}));
//# sourceMappingURL=tars-utils.min.js.map
