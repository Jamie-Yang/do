/*
 * tars-utils
 * https://github.com/Jamie-Yang/tars-utils.git
 * version 1.0.1
 */
!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports):"function"==typeof define&&define.amd?define(["exports"],t):t((e=e||self).tars={})}(this,(function(e){"use strict";var t=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;return Array.from({length:Math.ceil(e.length/t)},(function(n,r){return e.slice(r*t,r*t+t)}))},n=0;function r(e){var t=Date.now(),r=Math.max(n+16,t);return setTimeout((function(){e(n=r)}),r-t)}function i(e){return(window.requestAnimationFrame||window.webkitRequestAnimationFrame||r)(e)}function o(e){(window.cancelAnimationFrame||window.webkitCancelAnimationFrame||window.clearTimeout)(e)}function a(e){return e?window.navigator.userAgent.toLowerCase():window.navigator.userAgent}function u(){return/Android/i.test(a())}function c(){return/iPhone|iPad|iPod/.test(a())}function l(){return/iPad/.test(a())}function d(){return/iPhone/.test(a())}function f(){if(!d())return!1;if("undefined"!=typeof window&&window){var e=window,t=e.devicePixelRatio,n=e.screen,r=n.width,i=n.height;return[{dpr:3,width:375,height:812},{dpr:3,width:414,height:896},{dpr:2,width:414,height:896}].some((function(e){return e.dpr===t&&e.width===r&&e.height===i}))}return!1}function s(){return/MicroMessenger/i.test(a())}var m=document.documentElement,g=document.body;function h(){return Math.max(m.scrollHeight,g.scrollHeight,m.clientHeight)}var p=document.documentElement,v=document.body;function w(){return Math.max(p.scrollWidth,v.scrollWidth,p.clientWidth)}var y=document.documentElement,x=document.body;function b(){return y.scrollTop||x.scrollTop}function A(e,t){return getComputedStyle(e)[t]}var O=document.documentElement;function P(){return O.clientHeight}var S=document.documentElement;function T(){return S.clientWidth}function E(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=e.getBoundingClientRect(),r=n.top,i=n.left,o=n.bottom,a=n.right,u=window,c=u.innerHeight,l=u.innerWidth;return t?(r>0&&r<c||o>0&&o<c)&&(i>0&&i<l||a>0&&a<l):r>=0&&i>=0&&o<=c&&a<=l}function M(){function e(e,t){return e.target.tagName!==t.toUpperCase()&&e.target.tagName!==t.toLowerCase()}function t(t){e(t,"input")&&e(t,"textarea")&&e(t,"select")&&e(t,"menus")&&t.preventDefault()}document.addEventListener("touchmove",(function(e){e.preventDefault()})),document.addEventListener("touchstart",t),document.addEventListener("touchend",t)}function j(){return"#"+("00000"+(~~(Math.random()*(1<<24))).toString(16)).slice(-6)}function R(){document.querySelectorAll("*").forEach((function(e){e.style.outline="1px solid "+j}))}function C(e){if(e.focus(),e.setSelectionRange){var t=2*e.value.length;setTimeout((function(){e.setSelectionRange(t,t)}),0)}else e.value=e.value;e.scrollTop=999999}function F(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2?arguments[2]:void 0,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:500,i=arguments.length>4?arguments[4]:void 0;window.requestAnimationFrame||(window.requestAnimationFrame=window.webkitRequestAnimationFrame||function(e){window.setTimeout(e,1e3/60)});var o=Math.abs(t-n),a=Math.ceil(o/r*50),u=function t(n,r,o){if(n!==r){var a=n+o>r?r:n+o;n>r&&(a=n-o<r?r:n-o),e===window?window.scrollTo(a,a):e.scrollTop=a,window.requestAnimationFrame((function(){return t(a,r,o)}))}else i&&i()};u(t,n,a)}function I(e,t,n){e.style[t]=n}function k(e){var t=Number(e);return isNaN(t)?e:t.toFixed(2).replace(/\d{1,3}(?=(\d{3})+(\.\d*)?$)/g,"$&,")}function D(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:" ",n=e.toString().replace(/\s/g,"");return n.replace(/(\d{4})(?=\d)/g,"$1".concat(t))}function H(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function W(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function N(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?W(Object(n),!0).forEach((function(t){H(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):W(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function q(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0,n={year:0,month:0,date:0,day:0,hour:0,minute:0,second:0,millisecond:0},r=N(N({},n),e),i={"Y+":r.year,"M+":r.month,"D+":r.date,"H+":r.hour,"m+":r.minute,"s+":r.second,"S+":r.millisecond,d:r.day},o=t;for(var a in i)if(new RegExp("(".concat(a,")")).test(t)){var u=void 0;u="d"===a?i[a]:("00"+i[a]).slice(-RegExp.$1.length),o=o.replace(RegExp.$1,u)}return o}function B(e,t){return q({year:e.getFullYear(),month:e.getMonth()+1,date:e.getDate(),hour:e.getHours(),minute:e.getMinutes(),second:e.getSeconds(),millisecond:e.getMilliseconds()},t)}function U(e,t){return q({day:Math.floor(e/864e5),hour:Math.floor(e%864e5/36e5),minute:Math.floor(e%36e5/6e4),second:Math.floor(e%6e4/1e3),millisecond:Math.floor(e%1e3)},t)}function z(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:" ",n=e.toString().replace(/\s/g,"");return/(\d{3})(\d{4})(\d{4})/.test(n)?"".concat(RegExp.$1).concat(t).concat(RegExp.$2).concat(t).concat(RegExp.$3):e}function L(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return 0===t.length?function(e){return e}:1===t.length?t[0]:t.reduce((function(e,t){return function(){return e(t.apply(void 0,arguments))}}))}var $=function(e){return Object.prototype.toString.call(e).slice(8,-1).toLowerCase()};function V(e){return"object"===$(e)}function _(e,t,n){var r,i,o,a,u,c,l=0,d=!1,f=!1,s=!0;if("function"!=typeof e)throw new TypeError("Expected a function");function m(t){var n=r,o=i;return r=i=void 0,l=t,a=e.apply(o,n)}function g(e){return l=e,u=setTimeout(p,t),d?m(e):a}function h(e){var n=e-c;return void 0===c||n>=t||n<0||f&&e-l>=o}function p(){var e=Date.now();if(h(e))return v(e);u=setTimeout(p,function(e){var n=e-l,r=t-(e-c);return f?Math.min(r,o-n):r}(e))}function v(e){return u=void 0,s&&r?m(e):(r=i=void 0,a)}function w(){for(var e=Date.now(),n=h(e),o=arguments.length,l=new Array(o),d=0;d<o;d++)l[d]=arguments[d];if(r=l,i=this,c=e,n){if(void 0===u)return g(c);if(f)return clearTimeout(u),u=setTimeout(p,t),m(c)}return void 0===u&&(u=setTimeout(p,t)),a}return t=Number(t)||0,V(n)&&(d=!!n.leading,o=(f="maxWait"in n)?Math.max(Number(n.maxWait)||0,t):o,s="trailing"in n?!!n.trailing:s),w.cancel=function(){void 0!==u&&clearTimeout(u),l=0,r=c=i=u=void 0},w.flush=function(){return void 0===u?a:v(Date.now())},w}function Q(e,t,n){var r=!0,i=!0;if("function"!=typeof e)throw new TypeError("Expected a function");return V(n)&&(r="leading"in n?!!n.leading:r,i="trailing"in n?!!n.trailing:i),_(e,t,{leading:r,maxWait:t,trailing:i})}function Y(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:.9,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=n.maxWidth,i=void 0===r?750:r,o=n.mimeType;return new Promise((function(n,r){if(e instanceof File){var a=new FileReader;a.onload=function(){u(this.result)},a.readAsDataURL(e)}else"string"==typeof e&&u(e);function u(a){var u=a.match(/data:([^;,]+)/);if(Array.isArray(u)){if("image/gif"===(o||u[1]))return n(e);var c=new Image;c.src=a,c.onload=function(){var e=this.naturalWidth,r=this.naturalHeight;e>i&&(r=Math.round(i*r/e),e=i);var a=document.createElement("canvas");a.width=e,a.height=r,a.getContext("2d").drawImage(this,0,0,e,r),a.toBlob((function(e){n(e)}),o||u[1],t)}}else r(new Error("[Slug Function] Non-picture type Data URLs"))}}))}function Z(e){return"array"===$(e)}function G(e){return"boolean"===$(e)}function J(e){return null===e||!(Object.keys(e)||e).length}function K(e){return"function"===$(e)}function X(e){return"map"===$(e)}function ee(e){return"number"===$(e)}function te(e){return"set"===$(e)}function ne(e){return"string"===$(e)}function re(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return[].concat(n).reduce((function(e,t){return Object.keys(t).reduce((function(n,r){var i=t[r];return Array.isArray(i)?e[r]=re([],i):e[r]=i instanceof Object?re({},i):i,e}),{})}),e)}function ie(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return[].concat(t).reduce((function(e,t){return Object.keys(t).reduce((function(n,r){return e[r]=e.hasOwnProperty(r)?[].concat(e[r]).concat(t[r]):t[r],e}),{})}),{})}function oe(e,t){return Object.keys(e).filter((function(e){return!t.includes(e)})).reduce((function(t,n){return t[n]=e[n],t}),{})}function ae(e,t){return t.reduce((function(t,n){return n in e&&(t[n]=e[n]),t}),{})}function ue(e,t,n){var r=Math.random()*(t-e)+e;return n?Math.floor(r):r}function ce(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:32,t="ABCDEFGHIJKLMNOPQRSTUVWXTZabcdefghiklmnopqrstuvwxyz0123456789",n="",r=0;r<e;r++)n+=t.charAt(Math.floor(Math.random()*t.length));return n}function le(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(function(e){var t=16*Math.random()|0;return("x"===e?t:3&t|8).toString(16)}))}function de(e){return e.indexOf("-")<0&&e.indexOf("_")<0?e:e.replace(/[-_][^-_]/g,(function(e){return e.charAt(1).toUpperCase()}))}function fe(e){return e.replace(/([a-z0-9])([A-Z])/g,"$1_$2").toLowerCase()}function se(e){return fe(e).replace(/_/g,"-")}function me(e){var t=e.length,n=t-t/8*2;return Math.ceil(n/1024)}function ge(e){return e.replace(/<script[^>]*>(\S\s*?)<\/script>/gim,"").replace(/<[^>]+>/g,"")}function he(e){return e.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#x27;")}function pe(e){return(e.match(/([^?=&]+)(=([^&]*))/g)||[]).reduce((function(e,t){return e[t.slice(0,t.indexOf("="))]=t.slice(t.indexOf("=")+1),e}),{})}function ve(e){var t="",n=e.indexOf("#");return-1!==n&&(t=e.slice(n)),t}function we(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:window.location.href;return pe(ve(e))}function ye(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:window.location.href;return we(t)[e]}function xe(e){var t=function(e){var t,n=e.indexOf("#");return-1!==n&&(t=e.slice(0,n)),t}(e),n=t.indexOf("?");return-1===n?"":t.slice(n+1)}function be(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:window.location.href;return pe(xe(e))}function Ae(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:window.location.href;return be(t)[e]}function Oe(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:window.location.href;if(-1===e.indexOf("?"))return{};var t="?"===e[0]?e.substr(1):e.substring(e.lastIndexOf("?")+1);if(""===t)return{};t=t.split("&");for(var n={},r=0;r<t.length;r++){var i=t[r].split("=");n[decodeURIComponent(i[0])]=decodeURIComponent(i[1]||"")}return n}function Pe(e){if(!e)return"";var t=[],n=function(n){if({}.hasOwnProperty.call(e,n)){var r=e[n];if(r instanceof Array)return t=t.concat(r.map((function(e,t){return"".concat(encodeURIComponent(n),"[").concat(t,"]=").concat(encodeURIComponent(e))}))),"continue";t.push("".concat(encodeURIComponent(n),"=").concat(encodeURIComponent(e[n])))}};for(var r in e)n(r);return t.join("&")}console.log(ve("https://www.baidu.com/path?a=1&b=2#/?c=3"));var Se={chunk:t,requestAnimFrame:i,cancelAnimFrame:o,isAndroid:u,isIOS:c,isIPad:l,isIPhone:d,isNotchIPhone:f,isWeixin:s,ua:a,getPageHeight:h,getPageWidth:w,getPageScrollTop:b,getStyle:A,getViewHeight:P,getViewWidth:T,isElementVisible:E,lockTouch:M,outlineElements:R,putCursorAtEnd:C,scrollTo:F,setStyle:I,formatAmount:k,formatBankCard:D,formatDate:B,formatRemainTime:U,formatTel:z,compose:L,debounce:_,throttle:Q,optimizeImage:Y,getType:$,isArray:Z,isBoolean:G,isEmpty:J,isFunction:K,isMap:X,isNumber:ee,isObject:V,isSet:te,isString:ne,extend:re,merge:ie,omit:oe,pick:ae,randomA2B:ue,randomColor:j,randomString:ce,uuid:le,camelize:de,dasherize:se,getBase64Size:me,stripTags:ge,underscored:fe,xssFilter:he,getHashParams:we,getHashParam:ye,getSearchParams:be,getSearchParam:Ae,parseQuery:Oe,stringifyQuery:Pe};e.camelize=de,e.cancelAnimFrame=o,e.chunk=t,e.compose=L,e.dasherize=se,e.debounce=_,e.default=Se,e.extend=re,e.formatAmount=k,e.formatBankCard=D,e.formatDate=B,e.formatRemainTime=U,e.formatTel=z,e.getBase64Size=me,e.getHashParam=ye,e.getHashParams=we,e.getPageHeight=h,e.getPageScrollTop=b,e.getPageWidth=w,e.getSearchParam=Ae,e.getSearchParams=be,e.getStyle=A,e.getType=$,e.getViewHeight=P,e.getViewWidth=T,e.isAndroid=u,e.isArray=Z,e.isBoolean=G,e.isElementVisible=E,e.isEmpty=J,e.isFunction=K,e.isIOS=c,e.isIPad=l,e.isIPhone=d,e.isMap=X,e.isNotchIPhone=f,e.isNumber=ee,e.isObject=V,e.isSet=te,e.isString=ne,e.isWeixin=s,e.lockTouch=M,e.merge=ie,e.omit=oe,e.optimizeImage=Y,e.outlineElements=R,e.parseQuery=Oe,e.pick=ae,e.putCursorAtEnd=C,e.randomA2B=ue,e.randomColor=j,e.randomString=ce,e.requestAnimFrame=i,e.scrollTo=F,e.setStyle=I,e.stringifyQuery=Pe,e.stripTags=ge,e.throttle=Q,e.ua=a,e.underscored=fe,e.uuid=le,e.xssFilter=he,Object.defineProperty(e,"__esModule",{value:!0})}));
//# sourceMappingURL=tars-utils.min.js.map
