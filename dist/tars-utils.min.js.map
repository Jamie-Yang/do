{"version":3,"file":"tars-utils.min.js","sources":["../src/array/chunk.js","../src/browser/request-anim-frame.js","../src/browser/cancel-anim-frame.js","../src/device/ua.js","../src/device/is-android.js","../src/device/is-ios.js","../src/device/is-ipad.js","../src/device/is-iphone.js","../src/device/is-notch-iphone.js","../src/device/is-weixin.js","../src/dom/get-page-height.js","../src/dom/get-page-width.js","../src/dom/get-page-scroll-top.js","../src/dom/get-style.js","../src/dom/get-view-height.js","../src/dom/get-view-width.js","../src/dom/is-element-visible.js","../src/dom/lock-touch.js","../src/random/random-color.js","../src/dom/outline-elements.js","../src/dom/put-cursor-at-end.js","../src/dom/scroll-to.js","../src/dom/set-style.js","../src/format/format-amount.js","../src/format/format-bank-card.js","../src/format/format-time.js","../src/format/format-date.js","../src/format/format-remain-time.js","../src/format/format-tel.js","../src/function/compose.js","../src/lang/get-type.js","../src/lang/is-object.js","../src/function/debounce.js","../src/function/throttle.js","../src/image/optimize-image.js","../src/lang/is-array.js","../src/lang/is-boolean.js","../src/lang/is-empty.js","../src/lang/is-function.js","../src/lang/is-map.js","../src/lang/is-number.js","../src/lang/is-set.js","../src/lang/is-string.js","../src/object/extend.js","../src/object/merge.js","../src/object/omit.js","../src/object/pick.js","../src/random/random-a2b.js","../src/random/random-string.js","../src/random/uuid.js","../src/string/camelize.js","../src/string/underscored.js","../src/string/dasherize.js","../src/string/get-base64-size.js","../src/string/strip-tags.js","../src/string/xxs-filter.js","../src/url/get-params.js","../src/url/get-hash-params.js","../src/url/get-hash-param.js","../src/url/get-search-params.js","../src/url/get-search-param.js","../src/url/parse-query.js","../src/url/stringify-query.js","../src/index.js"],"sourcesContent":["/**\n * 数组切片\n *\n * @param {Array} arr 数组\n * @param {number} size 切片长度\n * @returns {Array} 切片后的二维数组\n * @example\n * chunk([1, 2, 3, 4], 2) => [[1, 2], [3, 4]]\n */\nconst chunk = (arr, size = 1) =>\n  Array.from({ length: Math.ceil(arr.length / size) }, (_v, i) =>\n    arr.slice(i * size, i * size + size)\n  );\n\nexport default chunk;\n","/**\n * Polyfill for requestAnimationFrame\n *\n * @see https://github.com/darius/requestAnimationFrame/blob/master/requestAnimationFrame.js\n */\n\nlet lastTime = 0;\n\n/**\n * 回退方法\n *\n * @param {Function} callback 回调方法\n * @returns {Function} fallback\n */\nfunction fallback(callback) {\n  const now = Date.now();\n  const nextTime = Math.max(lastTime + 16, now);\n\n  return setTimeout(function () {\n    callback((lastTime = nextTime));\n  }, nextTime - now);\n}\n\n/**\n * @param {Function} callback 回调方法\n * @returns {Function} requestAnimationFrame 或 回退方法setTimeout\n */\nexport default function requestAnimFrame(callback) {\n  return (window.requestAnimationFrame || window.webkitRequestAnimationFrame || fallback)(callback);\n}\n","/**\n * @param {number} id 事件ID\n * @returns {undefined}\n */\nexport default function cancelAnimFrame(id) {\n  (window.cancelAnimationFrame || window.webkitCancelAnimationFrame || window.clearTimeout)(id);\n}\n","/**\n * 获取UA\n *\n * @param {any} lower 是否转小写\n * @returns {string} UA\n */\nexport default function (lower) {\n  return lower ? window.navigator.userAgent.toLowerCase() : window.navigator.userAgent;\n}\n","import ua from './ua';\n\n/**\n * 是否为Android系统\n *\n * @returns {boolean} 是否为Android系统\n */\nexport default function isAndroid() {\n  return /Android/i.test(ua());\n}\n","import ua from './ua';\n\n/**\n * 是否为iOS系统\n *\n * @returns {boolean} 是否为iOS系统\n */\nexport default function isIOS() {\n  return /iPhone|iPad|iPod/.test(ua());\n}\n","import ua from './ua';\n\n/**\n * 是否为iPad设备\n *\n * @returns {boolean} 是否为iPad设备\n */\nexport default function isIPad() {\n  return /iPad/.test(ua());\n}\n","import ua from './ua';\n\n/**\n * 是否为iPhone设备\n *\n * @returns {boolean} 是否为iPhone设备\n */\nexport default function isIPhone() {\n  return /iPhone/.test(ua());\n}\n","import isIPhone from './is-iphone';\n\n/**\n * 是否为iPhone刘海屏机型：X XS, XS Max, XR, 11, 11 Pro, 11 Pro Max\n *\n * @returns {boolean} 是否为微信客户端\n */\nexport default function isNotchIPhone() {\n  if (!isIPhone()) {\n    return false;\n  }\n\n  const screens = [\n    { dpr: 3, width: 375, height: 812 },\n    { dpr: 3, width: 414, height: 896 },\n    { dpr: 2, width: 414, height: 896 },\n  ];\n  if (typeof window !== 'undefined' && window) {\n    const { devicePixelRatio, screen } = window;\n    const { width, height } = screen;\n    return screens.some(\n      (item) => item.dpr === devicePixelRatio && item.width === width && item.height === height\n    );\n  }\n  return false;\n}\n","import ua from './ua';\n\n/**\n * 是否为微信客户端\n *\n * @returns {boolean} 是否为微信客户端\n */\nexport default function isWeixin() {\n  return /MicroMessenger/i.test(ua());\n}\n","const root = document.documentElement;\nconst body = document.body;\n\n/**\n * 获取页面高度\n *\n * @returns {number} 页面高度\n */\nexport default function getPageHeight() {\n  return Math.max(root.scrollHeight, body.scrollHeight, root.clientHeight);\n}\n","const root = document.documentElement;\nconst body = document.body;\n\n/**\n * 获取页面宽度\n *\n * @returns {number} 页面宽度\n */\nexport default function getPageWidth() {\n  return Math.max(root.scrollWidth, body.scrollWidth, root.clientWidth);\n}\n","const root = document.documentElement;\nconst body = document.body;\n\n/**\n * 获取页面scrollTop\n *\n * @returns {number} 滚动值\n */\nexport default function getPageScrollTop() {\n  return root.scrollTop || body.scrollTop;\n}\n","/**\n * 获取元素样式\n *\n * @param {Element} el 元素\n * @param {string} ruleName 属性名\n * @returns {string} 样式\n */\nexport default function getStyle(el, ruleName) {\n  return getComputedStyle(el)[ruleName];\n}\n","const root = document.documentElement;\n\n/**\n * 获取视窗高度\n *\n * @returns {number} 视窗高度\n */\nexport default function getViewHeight() {\n  return root.clientHeight;\n}\n","const root = document.documentElement;\n\n/**\n * 获取视窗宽度\n *\n * @returns {number} 视窗宽度\n */\nexport default function getViewWidth() {\n  return root.clientWidth;\n}\n","/**\n * 判断元素是否在可视窗口可见\n *\n * @param {Element} el 元素\n * @param {boolean} partiallyVisible 是否部分可见\n * @returns {boolean} 是否可见\n */\nexport default function elementIsVisibleInViewport(el, partiallyVisible = false) {\n  const { top, left, bottom, right } = el.getBoundingClientRect();\n  const { innerHeight, innerWidth } = window;\n  return partiallyVisible\n    ? ((top > 0 && top < innerHeight) || (bottom > 0 && bottom < innerHeight)) &&\n        ((left > 0 && left < innerWidth) || (right > 0 && right < innerWidth))\n    : top >= 0 && left >= 0 && bottom <= innerHeight && right <= innerWidth;\n}\n","/**\n * 消除非交互元素的touch事件\n */\nexport default function lockTouch() {\n  document.addEventListener('touchmove', function (e) {\n    e.preventDefault();\n  });\n  document.addEventListener('touchstart', preventDefault);\n  document.addEventListener('touchend', preventDefault);\n\n  /**\n   * 判断事件是否非由某类元素触发\n   *\n   * @param {Event} e 事件\n   * @param {string} tag 标签名\n   * @returns {boolean} 非指定元素\n   */\n  function not(e, tag) {\n    return e.target.tagName !== tag.toUpperCase() && e.target.tagName !== tag.toLowerCase();\n  }\n\n  /**\n   * 阻止非交互元素触发事件\n   *\n   * @param {Event} e 事件\n   * @returns {undefined}\n   */\n  function preventDefault(e) {\n    if (not(e, 'input') && not(e, 'textarea') && not(e, 'select') && not(e, 'menus'))\n      e.preventDefault();\n  }\n}\n","/**\n * 生成随机Hex颜色值\n *\n * @returns {string} 随机Hex颜色值\n */\nexport default function randomColor() {\n  return '#' + ('00000' + (~~(Math.random() * (1 << 24))).toString(16)).slice(-6);\n}\n","import randomColor from '../random/random-color';\n\n/**\n * 框出所有元素，检测布局\n */\nexport default function outlineElements() {\n  document.querySelectorAll('*').forEach((el) => {\n    el.style.outline = '1px solid ' + randomColor;\n  });\n}\n","/**\n * 将输入框光标定位在文端结尾处\n *\n * @param {Element} el 元素\n */\nexport default function putCursorAtEnd(el) {\n  el.focus();\n\n  // If this function exists... (IE 9+)\n  if (el.setSelectionRange) {\n    // Double the length because Opera is inconsistent about whether a carriage return is one character or two.\n    let len = el.value.length * 2;\n\n    // Timeout seems to be required for Blink\n    setTimeout(function () {\n      el.setSelectionRange(len, len);\n    }, 0);\n  } else {\n    // As a fallback, replace the contents with itself\n    el.value = el.value; // eslint-disable-line no-self-assign\n  }\n\n  // Scroll to the bottom, in case we're in a tall textarea\n  // (Necessary for Firefox and Chrome)\n  el.scrollTop = 999999;\n}\n","/**\n * 平滑滚动\n *\n * @param {Element|Window} el 滚动容器\n * @param {number} from 起始量\n * @param {number} to 终止量\n * @param {number} duration 过渡时间\n * @param {Function} endCallback 结束回调\n */\n// eslint-disable-next-line max-params\nexport default function scrollTo(el, from = 0, to, duration = 500, endCallback) {\n  if (!window.requestAnimationFrame) {\n    window.requestAnimationFrame =\n      window.webkitRequestAnimationFrame ||\n      ((callback) => {\n        window.setTimeout(callback, 1000 / 60);\n      });\n  }\n  const difference = Math.abs(from - to);\n  const step = Math.ceil((difference / duration) * 50);\n\n  const scroll = (start, end, step) => {\n    if (start === end) {\n      endCallback && endCallback();\n      return;\n    }\n\n    let d = start + step > end ? end : start + step;\n    if (start > end) {\n      d = start - step < end ? end : start - step;\n    }\n\n    if (el === window) {\n      window.scrollTo(d, d);\n    } else {\n      el.scrollTop = d;\n    }\n    window.requestAnimationFrame(() => scroll(d, end, step));\n  };\n  scroll(from, to, step);\n}\n","/**\n * 设置元素样式\n *\n * @param {Element} el 元素\n * @param {string} ruleName 样式名\n * @param {string} val 样式\n */\nexport default function setStyle(el, ruleName, val) {\n  el.style[ruleName] = val;\n}\n","/**\n * 金额格式化，保留两位小数、千分位格式化 2333 -> 2,333.00\n *\n * @param {number} amount 金额\n * @returns {string} 格式化结果\n */\nexport default function formatAmount(amount) {\n  const num = Number(amount);\n\n  if (isNaN(num)) {\n    return amount;\n  }\n\n  return num.toFixed(2).replace(/\\d{1,3}(?=(\\d{3})+(\\.\\d*)?$)/g, '$&,');\n}\n","/**\n * 银行卡格式化，格式为四位分割\n *\n * @param {string|number} bankCard 银行卡号\n * @param {string} separator 分隔符，默认空格\n * @returns {string} 格式化结果\n */\nexport default function formatBankCard(bankCard, separator = ' ') {\n  const str = bankCard.toString().replace(/\\s/g, '');\n  return str.replace(/(\\d{4})(?=\\d)/g, `$1${separator}`);\n}\n","/**\n * 时间格式标记替换通用逻辑\n *\n * @param {object} time 时间对象：形式如defaults\n * @param {string} format 格式描述：YYYY-MM-DD HH:mm:ss.SSS 或 d天 HH:mm:ss.SSS\n * @returns {string} 2020-01-01 12:00:00.000 或 1天 12:00:00.00\n */\nexport default function formatTime(time = {}, format) {\n  const defaults = {\n    year: 0,\n    month: 0,\n    date: 0,\n    day: 0,\n    hour: 0,\n    minute: 0,\n    second: 0,\n    millisecond: 0,\n  };\n\n  const t = { ...defaults, ...time };\n\n  const map = {\n    'Y+': t.year,\n    'M+': t.month,\n    'D+': t.date,\n    'H+': t.hour,\n    'm+': t.minute,\n    's+': t.second,\n    'S+': t.millisecond,\n    d: t.day,\n  };\n\n  let result = format;\n\n  for (const k in map) {\n    if (new RegExp(`(${k})`).test(format)) {\n      let v;\n      if (k === 'd') {\n        v = map[k];\n      } else {\n        v = ('00' + map[k]).slice(-RegExp.$1.length);\n      }\n      result = result.replace(RegExp.$1, v);\n    }\n  }\n\n  return result;\n}\n","import formatTime from './format-time';\n\n/**\n * 时间格式化\n *\n * @param {Date} date 时间对象\n * @param {string} format 格式描述：YYYY-MM-DD HH:mm:ss.SSS\n * @returns {string} 格式化结果：2020-01-01 12:00:00.000\n */\nexport default function formatDate(date, format) {\n  const time = {\n    year: date.getFullYear(),\n    month: date.getMonth() + 1,\n    date: date.getDate(),\n    hour: date.getHours(),\n    minute: date.getMinutes(),\n    second: date.getSeconds(),\n    millisecond: date.getMilliseconds(),\n  };\n\n  return formatTime(time, format);\n}\n","import formatTime from './format-time';\n\n/**\n * 剩余时间格式化（不支持年月，因其周期不固定）\n *\n * @param {number} remain 剩余毫秒数\n * @param {string} format 格式描述：d天 HH:mm:ss.SSS\n * @returns {string} 格式化结果：1天 12:00:00.00\n */\nexport default function formatRemainTime(remain, format) {\n  const SECOND = 1000;\n  const MINUTE = 60 * SECOND;\n  const HOUR = 60 * MINUTE;\n  const DAY = 24 * HOUR;\n\n  let time = {\n    day: Math.floor(remain / DAY),\n    hour: Math.floor((remain % DAY) / HOUR),\n    minute: Math.floor((remain % HOUR) / MINUTE),\n    second: Math.floor((remain % MINUTE) / SECOND),\n    millisecond: Math.floor(remain % SECOND),\n  };\n\n  return formatTime(time, format);\n}\n","/**\n * 手机号格式化，格式为344\n *\n * @param {string|number} tel 手机号码\n * @param {string} separator 分隔符，默认空格\n * @returns {string} 格式化结果\n */\nexport default function formatTel(tel, separator = ' ') {\n  const str = tel.toString().replace(/\\s/g, '');\n\n  if (/(\\d{3})(\\d{4})(\\d{4})/.test(str)) {\n    return `${RegExp.$1}${separator}${RegExp.$2}${separator}${RegExp.$3}`;\n  }\n\n  return tel;\n}\n","/**\n * 函数组合\n * 可将 fn1(fn2(fn3(fn4(x)))) 这种嵌套的调用方式\n * 改成 compose(fn1,fn2,fn3,fn4)(x) 的方式调用\n *\n * @param  {...Function} funcs 方法\n * @returns {Function} 组合结果方法\n */\nexport default function compose(...funcs) {\n  if (funcs.length === 0) {\n    return (arg) => arg;\n  }\n\n  if (funcs.length === 1) {\n    return funcs[0];\n  }\n\n  return funcs.reduce((a, b) => (...args) => a(b(...args)));\n}\n","/**\n * 获取数据类型\n *\n * @param {*} val 数据\n * @returns {string} 类型名 object，array，string，boolean，number，map，set，function, undefined\n */\nconst getType = (val) => {\n  return Object.prototype.toString\n    .call(val)\n    .slice(8, -1) // [object XXX]\n    .toLowerCase();\n};\n\nexport default getType;\n","import getType from './get-type';\n\n/**\n * 检查数据类型是否为：对象\n *\n * @param {*} obj 数据\n * @returns {boolean} 是否\n */\nexport default function isObject(obj) {\n  return getType(obj) === 'object';\n}\n","import isObject from '../lang/is-object';\n\n/**\n * Creates a debounced function that delays invoking `func` until after `wait`\n * milliseconds have elapsed since the last time the debounced function was\n * invoked. The debounced function comes with a `cancel` method to cancel\n * delayed `func` invocations and a `flush` method to immediately invoke them.\n * Provide `options` to indicate whether `func` should be invoked on the\n * leading and/or trailing edge of the `wait` timeout. The `func` is invoked\n * with the last arguments provided to the debounced function. Subsequent\n * calls to the debounced function return the result of the last `func`\n * invocation.\n *\n * **Note:** If `leading` and `trailing` options are `true`, `func` is\n * invoked on the trailing edge of the timeout only if the debounced function\n * is invoked more than once during the `wait` timeout.\n *\n * If `wait` is `0` and `leading` is `false`, `func` invocation is deferred\n * until to the next tick, similar to `setTimeout` with a timeout of `0`.\n *\n * See [David Corbacho's article](https://css-tricks.com/debouncing-throttling-explained-examples/)\n * for details over the differences between `_.debounce` and `_.throttle`.\n *\n * @static\n * @param {Function} func The function to debounce.\n * @param {number} [wait=0] The number of milliseconds to delay.\n * @param {object} [options={}] The options object.\n * @param {boolean} [options.leading=false]\n *  Specify invoking on the leading edge of the timeout.\n * @param {number} [options.maxWait]\n *  The maximum time `func` is allowed to be delayed before it's invoked.\n * @param {boolean} [options.trailing=true]\n *  Specify invoking on the trailing edge of the timeout.\n * @returns {Function} Returns the new debounced function.\n * @example\n *\n * // Avoid costly calculations while the window size is in flux.\n * jQuery(window).on('resize', _.debounce(calculateLayout, 150));\n *\n * // Invoke `sendMail` when clicked, debouncing subsequent calls.\n * jQuery(element).on('click', _.debounce(sendMail, 300, {\n *   'leading': true,\n *   'trailing': false\n * }));\n *\n * // Ensure `batchLog` is invoked once after 1 second of debounced calls.\n * var debounced = _.debounce(batchLog, 250, { 'maxWait': 1000 });\n * var source = new EventSource('/stream');\n * jQuery(source).on('message', debounced);\n *\n * // Cancel the trailing debounced invocation.\n * jQuery(window).on('popstate', debounced.cancel);\n */\nexport default function debounce(func, wait, options) {\n  let lastArgs;\n  let lastThis;\n  let maxWait;\n  let result;\n  let timerId;\n  let lastCallTime;\n  let lastInvokeTime = 0;\n  let leading = false;\n  let maxing = false;\n  let trailing = true;\n\n  if (typeof func !== 'function') {\n    throw new TypeError('Expected a function');\n  }\n  wait = Number(wait) || 0; // eslint-disable-line no-param-reassign\n  if (isObject(options)) {\n    leading = !!options.leading;\n    maxing = 'maxWait' in options;\n    maxWait = maxing ? Math.max(Number(options.maxWait) || 0, wait) : maxWait;\n    trailing = 'trailing' in options ? !!options.trailing : trailing;\n  }\n\n  /**\n   * @param {number} time 时间戳\n   * @returns {*} 方法执行结果\n   */\n  function invokeFunc(time) {\n    let args = lastArgs;\n    let thisArg = lastThis;\n\n    lastArgs = lastThis = undefined;\n    lastInvokeTime = time;\n    result = func.apply(thisArg, args);\n    return result;\n  }\n\n  /**\n   * @param {number} time 时间戳\n   * @returns {*} 方法执行结果\n   */\n  function leadingEdge(time) {\n    // Reset any `maxWait` timer.\n    lastInvokeTime = time;\n    // Start the timer for the trailing edge.\n    timerId = setTimeout(timerExpired, wait);\n    // Invoke the leading edge.\n    return leading ? invokeFunc(time) : result;\n  }\n\n  /**\n   * @param {number} time 时间戳\n   * @returns {number} 剩余等待时间\n   */\n  function remainingWait(time) {\n    let timeSinceLastCall = time - lastCallTime;\n    let timeSinceLastInvoke = time - lastInvokeTime;\n    let timeWaiting = wait - timeSinceLastCall;\n\n    return maxing ? Math.min(timeWaiting, maxWait - timeSinceLastInvoke) : timeWaiting;\n  }\n\n  /**\n   * @param {number} time 时间戳\n   * @returns {boolean} 可否调用\n   */\n  function shouldInvoke(time) {\n    let timeSinceLastCall = time - lastCallTime;\n    let timeSinceLastInvoke = time - lastInvokeTime;\n\n    // Either this is the first call, activity has stopped and we're at the\n    // trailing edge, the system time has gone backwards and we're treating\n    // it as the trailing edge, or we've hit the `maxWait` limit.\n    return (\n      lastCallTime === undefined ||\n      timeSinceLastCall >= wait ||\n      timeSinceLastCall < 0 ||\n      (maxing && timeSinceLastInvoke >= maxWait)\n    );\n  }\n\n  /**\n   * @returns {number} 定时器ID\n   */\n  function timerExpired() {\n    let time = Date.now();\n    if (shouldInvoke(time)) {\n      return trailingEdge(time);\n    }\n    // Restart the timer.\n    timerId = setTimeout(timerExpired, remainingWait(time));\n  }\n\n  /**\n   * @param {number} time 时间戳\n   * @returns {*} 方法执行结果\n   */\n  function trailingEdge(time) {\n    timerId = undefined;\n\n    // Only invoke if we have `lastArgs` which means `func` has been\n    // debounced at least once.\n    if (trailing && lastArgs) {\n      return invokeFunc(time);\n    }\n    lastArgs = lastThis = undefined;\n    return result;\n  }\n\n  /**\n   *  取消方法\n   */\n  function cancel() {\n    if (timerId !== undefined) {\n      clearTimeout(timerId);\n    }\n    lastInvokeTime = 0;\n    lastArgs = lastCallTime = lastThis = timerId = undefined;\n  }\n\n  /**\n   * 立即执行\n   *\n   * @returns {*} 方法执行结果\n   */\n  function flush() {\n    return timerId === undefined ? result : trailingEdge(Date.now());\n  }\n\n  /**\n   * @param {...*} args 方法参数\n   * @returns {*} 方法执行结果\n   */\n  function debounced(...args) {\n    let time = Date.now();\n    let isInvoking = shouldInvoke(time);\n\n    lastArgs = args;\n    lastThis = this; // eslint-disable-line no-invalid-this\n    lastCallTime = time;\n\n    if (isInvoking) {\n      if (timerId === undefined) {\n        return leadingEdge(lastCallTime);\n      }\n      if (maxing) {\n        // Handle invocations in a tight loop.\n        clearTimeout(timerId);\n        timerId = setTimeout(timerExpired, wait);\n        return invokeFunc(lastCallTime);\n      }\n    }\n    if (timerId === undefined) {\n      timerId = setTimeout(timerExpired, wait);\n    }\n    return result;\n  }\n\n  debounced.cancel = cancel;\n  debounced.flush = flush;\n\n  return debounced;\n}\n","import isObject from '../lang/is-object';\nimport debounce from './debounce';\n\n/**\n * Creates a throttled function that only invokes `func` at most once per\n * every `wait` milliseconds. The throttled function comes with a `cancel`\n * method to cancel delayed `func` invocations and a `flush` method to\n * immediately invoke them. Provide `options` to indicate whether `func`\n * should be invoked on the leading and/or trailing edge of the `wait`\n * timeout. The `func` is invoked with the last arguments provided to the\n * throttled function. Subsequent calls to the throttled function return the\n * result of the last `func` invocation.\n *\n * **Note:** If `leading` and `trailing` options are `true`, `func` is\n * invoked on the trailing edge of the timeout only if the throttled function\n * is invoked more than once during the `wait` timeout.\n *\n * If `wait` is `0` and `leading` is `false`, `func` invocation is deferred\n * until to the next tick, similar to `setTimeout` with a timeout of `0`.\n *\n * See [David Corbacho's article](https://css-tricks.com/debouncing-throttling-explained-examples/)\n * for details over the differences between `_.throttle` and `_.debounce`.\n *\n * @static\n * @since 0.1.0\n * @param {Function} func The function to throttle.\n * @param {number} [wait=0] The number of milliseconds to throttle invocations to.\n * @param {object} [options={}] The options object.\n * @param {boolean} [options.leading=true]\n *  Specify invoking on the leading edge of the timeout.\n * @param {boolean} [options.trailing=true]\n *  Specify invoking on the trailing edge of the timeout.\n * @returns {Function} Returns the new throttled function.\n * @example\n *\n * // Avoid excessively updating the position while scrolling.\n * jQuery(window).on('scroll', _.throttle(updatePosition, 100));\n *\n * // Invoke `renewToken` when the click event is fired, but not more than once every 5 minutes.\n * var throttled = _.throttle(renewToken, 300000, { 'trailing': false });\n * jQuery(element).on('click', throttled);\n *\n * // Cancel the trailing throttled invocation.\n * jQuery(window).on('popstate', throttled.cancel);\n */\nexport default function throttle(func, wait, options) {\n  let leading = true;\n  let trailing = true;\n\n  if (typeof func !== 'function') {\n    throw new TypeError('Expected a function');\n  }\n  if (isObject(options)) {\n    leading = 'leading' in options ? !!options.leading : leading;\n    trailing = 'trailing' in options ? !!options.trailing : trailing;\n  }\n  return debounce(func, wait, {\n    leading: leading,\n    maxWait: wait,\n    trailing: trailing,\n  });\n}\n","/**\n * 优化图片尺寸和文件大小\n * 不支持Gif格式\n *\n * @param {object|string} image 原始图片，支持File对象和base64字符串\n * @param {number} [quality] 品质，范围为 0 - 1, 仅支持MIME类型为 image/jpeg 或 image/webp\n * @param {object} [options={}] 配置项\n * @param {number} [options.maxWidth=750] 生成图片的最大宽度，若原始图片宽度小于此值，则使用原始图片的宽度\n * @param {string} [options.mimeType] 生成图片的MIME类型\n * @returns {Promise<Blob>} 生成图片 Blob对象\n */\nexport default function optimizeImage(image, quality = 0.9, { maxWidth = 750, mimeType } = {}) {\n  return new Promise((resolve, reject) => {\n    if (image instanceof File) {\n      const reader = new FileReader();\n      reader.onload = function () {\n        toBlob(this.result);\n      };\n      reader.readAsDataURL(image);\n    } else if (typeof image === 'string') {\n      toBlob(image);\n    }\n\n    /**\n     * To Blob\n     *\n     * @param {string} data - Image: Data URL\n     * @returns {Promise<Blob>} 生成图片 Blob对象\n     */\n    function toBlob(data) {\n      const type = data.match(/data:([^;,]+)/);\n      if (Array.isArray(type)) {\n        const outputType = mimeType ? mimeType : type[1];\n\n        if (outputType === 'image/gif') {\n          return resolve(image);\n        }\n\n        const virtualImage = new Image();\n        virtualImage.src = data;\n        virtualImage.onload = function () {\n          let width = this.naturalWidth;\n          let height = this.naturalHeight;\n          if (width > maxWidth) {\n            height = Math.round((maxWidth * height) / width);\n            width = maxWidth;\n          }\n          const canvas = document.createElement('canvas');\n          canvas.width = width;\n          canvas.height = height;\n          const context = canvas.getContext('2d');\n          context.drawImage(this, 0, 0, width, height);\n          canvas.toBlob(\n            (blob) => {\n              resolve(blob);\n            },\n            mimeType ? mimeType : type[1],\n            quality\n          );\n        };\n      } else {\n        reject(new Error('[Slug Function] Non-picture type Data URLs'));\n      }\n    }\n  });\n}\n","import getType from './get-type';\n\n/**\n * 检查数据类型是否为：数组\n *\n * @param {*} arr 数据\n * @returns {boolean} 是否\n */\nexport default function isArray(arr) {\n  return getType(arr) === 'array';\n}\n","import getType from './get-type';\n\n/**\n * 检查数据类型是否为：布尔\n *\n * @param {*} bool 数据\n * @returns {boolean} 是否\n */\nexport default function isBoolean(bool) {\n  return getType(bool) === 'boolean';\n}\n","/**\n * 检查数据是否为空：null、空对象、空数组\n *\n * @param {*} val 数据\n * @returns {boolean} 是否\n */\nexport default function isEmpty(val) {\n  return val === null || !(Object.keys(val) || val).length;\n}\n","import getType from './get-type';\n\n/**\n * 检查数据类型是否为：函数\n *\n * @param {*} func 数据\n * @returns {boolean} 是否\n */\nexport default function isFunction(func) {\n  return getType(func) === 'function';\n}\n","import getType from './get-type';\n\n/**\n * 检查数据类型是否为：Map\n *\n * @param {*} map 数据\n * @returns {boolean} 是否\n */\nexport default function isMap(map) {\n  return getType(map) === 'map';\n}\n","import getType from './get-type';\n\n/**\n * 检查数据类型是否为：数值\n *\n * @param {*} number 数据\n * @returns {boolean} 是否\n */\nexport default function isNumber(number) {\n  return getType(number) === 'number';\n}\n","import getType from './get-type';\n\n/**\n * 检查数据类型是否为：Set\n *\n * @param {*} set 数据\n * @returns {boolean} 是否\n */\nexport default function isSet(set) {\n  return getType(set) === 'set';\n}\n","import getType from './get-type';\n\n/**\n * 检查数据类型是否为：字符串\n *\n * @param {*} str 数据\n * @returns {boolean} 是否\n */\nexport default function isString(str) {\n  return getType(str) === 'string';\n}\n","/**\n * 对象深复制\n *\n * @param {object} target 目标对象\n * @param {object} objects 对象\n * @returns {object} 复制的对象\n */\nexport default function extend(target, ...objects) {\n  return [...objects].reduce(\n    (acc, obj) =>\n      Object.keys(obj).reduce((_a, k) => {\n        const v = obj[k];\n        if (Array.isArray(v)) {\n          acc[k] = extend([], v);\n        } else if (v instanceof Object) {\n          acc[k] = extend({}, v);\n        } else {\n          acc[k] = v;\n        }\n        return acc;\n      }, {}),\n    target\n  );\n}\n","/**\n * 对象深合并\n *\n * @param {...object} objects 对象\n * @returns {object} 合并后的对象\n * @example\n * merge({a:[1,2]}, {a:[3,4]}) => {a:[1,2,3,4]}\n */\nexport default function merge(...objects) {\n  return [...objects].reduce(\n    (acc, obj) =>\n      Object.keys(obj).reduce((_a, k) => {\n        acc[k] = acc.hasOwnProperty(k) ? [].concat(acc[k]).concat(obj[k]) : obj[k];\n        return acc;\n      }, {}),\n    {}\n  );\n}\n","/**\n * 移除对象的key，浅拷贝对象\n *\n * @param {object} obj 原始对象\n * @param {string[]} arr 需排除的key\n * @returns {object} 处理后的对象\n * @example\n * omit({a:1, b:2, c:3}, ['b', 'c']) => {a:1}\n */\nexport default function omit(obj, arr) {\n  return Object.keys(obj)\n    .filter((k) => !arr.includes(k))\n    .reduce((acc, key) => {\n      acc[key] = obj[key];\n      return acc;\n    }, {});\n}\n","/**\n * 筛选对象的key，浅拷贝对象\n *\n * @param {object} obj 原始对象\n * @param {string[]} arr 需保留的key\n * @returns {object} 处理后的对象\n * @example\n * pick({a:1, b:2, c:3}, ['b', 'c']) => {b:2, c:3}\n */\nexport default function pick(obj, arr) {\n  return arr.reduce((acc, cur) => {\n    cur in obj && (acc[cur] = obj[cur]);\n    return acc;\n  }, {});\n}\n","/**\n * 按指定范围生成随机数\n *\n * @param {number} a 最小值\n * @param {number} b 最大值\n * @param {boolean|string} [int] 是否生成整数\n * @returns {number} 随机数\n */\nexport default function randomA2B(a, b, int) {\n  let result = Math.random() * (a - b) + a;\n  return int ? Math.floor(result) : result;\n}\n","/**\n * 生成随机字符串\n *\n * @param {number} [len] 长度\n * @returns {string} 随机字符串\n */\nexport default function randomString(len = 32) {\n  let chars = 'ABCDEFGHIJKLMNOPQRSTUVWXTZabcdefghiklmnopqrstuvwxyz0123456789';\n  let str = '';\n  for (let i = 0; i < len; i++) {\n    str += chars.charAt(Math.floor(Math.random() * chars.length));\n  }\n  return str;\n}\n","/**\n * 生成uuid\n *\n * @returns {string} uuid\n */\nexport default function uuid() {\n  return 'xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx'.replace(/[xy]/g, function (c) {\n    let r = (Math.random() * 16) | 0;\n    let v = c === 'x' ? r : (r & 0x3) | 0x8;\n    return v.toString(16);\n  });\n}\n","/**\n * 转换 _ 或 - 为驼峰形式\n *\n * @param {string} str 原始字符串\n * @returns {string} CamelCase 形式\n */\nexport default function camelize(str) {\n  if (str.indexOf('-') < 0 && str.indexOf('_') < 0) {\n    return str;\n  }\n  return str.replace(/[-_][^-_]/g, (match) => match.charAt(1).toUpperCase());\n}\n","/**\n * 转换驼峰形式至 \"_\" 分割形式\n *\n * @param {string} str 原始字符串\n * @returns {string} camel_case 形式\n */\nexport default function underscored(str) {\n  return str.replace(/([a-z0-9])([A-Z])/g, '$1_$2').toLowerCase();\n}\n","import underscored from './underscored';\n\n/**\n * 转换驼峰形式至 \"-\" 分割形式\n *\n * @param {string} str 原始字符串\n * @returns {string} camel-case 形式\n */\nexport default function dasherize(str) {\n  return underscored(str).replace(/_/g, '-');\n}\n","/**\n * 计算base64字符串大小\n *\n * @param {string} base64 base64\n * @returns {number} 返回KB数字\n */\nexport default function getBase64Size(base64) {\n  let strLen = base64.length;\n  let fileSize = strLen - (strLen / 8) * 2;\n  return Math.ceil(fileSize / 1024);\n}\n","/**\n * 移除html标签\n *\n * @param {string} str 原始字符串\n * @returns {string} 无标签字符串\n */\nexport default function stripTags(str) {\n  return str.replace(/<script[^>]*>(\\S\\s*?)<\\/script>/gim, '').replace(/<[^>]+>/g, '');\n}\n","/**\n * 防XSS攻击过滤\n *\n * @param {string} str 原始字符串\n * @returns {string} 过滤后字符串\n */\nexport default function xssFilter(str) {\n  return str\n    .replace(/&/g, '&amp;')\n    .replace(/</g, '&lt;')\n    .replace(/>/g, '&gt;')\n    .replace(/\"/g, '&quot;')\n    .replace(/'/g, '&#x27;');\n}\n","/**\n * 获取URL参数对象\n *\n * @param {string} [query] 参数字段\n * @returns {object} 参数对象\n */\nexport default function getParams(query) {\n  return (query.match(/([^?=&]+)(=([^&]*))/g) || []).reduce((a, v) => {\n    a[v.slice(0, v.indexOf('='))] = v.slice(v.indexOf('=') + 1);\n    return a;\n  }, {});\n}\n","import getParams from './get-params';\n\n/**\n * 获取URL hash 参数对象\n *\n * @param {string} [url] 链接\n * @returns {object} 参数对象\n */\nexport default function getHashParams(url = window.location.href) {\n  return getParams(new URL(url).hash);\n}\n","import getHashParams from './get-hash-params';\n\n/**\n * 获取URL hash 指定的查询参数\n *\n * @param {string} key 参数名\n * @param {string} [url] 链接\n * @returns {string} 指定参数的值\n */\nexport default function getHashParam(key, url = window.location.href) {\n  return getHashParams(url)[key];\n}\n","import getParams from './get-params';\n\n/**\n * 获取URL search 参数对象\n *\n * @param {string} [url] 链接\n * @returns {object} 参数对象\n */\nexport default function getSearchParams(url = window.location.href) {\n  return getParams(new URL(url).search);\n}\n","import getSearchParams from './get-search-params';\n\n/**\n * 获取URL search 指定的查询参数\n *\n * @param {string} key 参数名\n * @param {string} [url] 链接\n * @returns {string} 指定参数的值\n */\nexport default function getSearchParam(key, url = window.location.href) {\n  return getSearchParams(url)[key];\n}\n","/**\n * url参数转对象\n *\n * @param  {string} [url] default: window.location.href\n * @returns {object} 结果对象\n */\nexport default function parseQuery(url = window.location.href) {\n  if (url.indexOf('?') === -1) {\n    return {};\n  }\n  let search = url[0] === '?' ? url.substr(1) : url.substring(url.lastIndexOf('?') + 1);\n  if (search === '') {\n    return {};\n  }\n  search = search.split('&');\n  let query = {};\n  for (let i = 0; i < search.length; i++) {\n    let pair = search[i].split('=');\n    query[decodeURIComponent(pair[0])] = decodeURIComponent(pair[1] || '');\n  }\n  return query;\n}\n","/**\n * 对象序列化\n * 支持一层对象\n *\n * @param {JSON} obj JSON对象\n * @returns {string} 序列化查询参数串\n */\nexport default function stringifyQuery(obj) {\n  if (!obj) return '';\n  let pairs = [];\n\n  for (let key in obj) {\n    if ({}.hasOwnProperty.call(obj, key)) {\n      let value = obj[key];\n\n      if (value instanceof Array) {\n        pairs = pairs.concat(\n          value.map((v, i) => `${encodeURIComponent(key)}[${i}]=${encodeURIComponent(v)}`)\n        );\n        continue;\n      }\n      pairs.push(`${encodeURIComponent(key)}=${encodeURIComponent(obj[key])}`);\n    }\n  }\n  return pairs.join('&');\n}\n","import chunk from './array/chunk';\n\nimport requestAnimFrame from './browser/request-anim-frame';\nimport cancelAnimFrame from './browser/cancel-anim-frame';\n\nimport isAndroid from './device/is-android';\nimport isIOS from './device/is-ios';\nimport isIPad from './device/is-ipad';\nimport isIPhone from './device/is-iphone';\nimport isNotchIPhone from './device/is-notch-iphone';\nimport isWeixin from './device/is-weixin';\nimport ua from './device/ua';\n\nimport getPageHeight from './dom/get-page-height';\nimport getPageWidth from './dom/get-page-width';\nimport getPageScrollTop from './dom/get-page-scroll-top';\nimport getStyle from './dom/get-style';\nimport getViewHeight from './dom/get-view-height';\nimport getViewWidth from './dom/get-view-width';\nimport isElementVisible from './dom/is-element-visible';\nimport lockTouch from './dom/lock-touch';\nimport outlineElements from './dom/outline-elements';\nimport putCursorAtEnd from './dom/put-cursor-at-end';\nimport scrollTo from './dom/scroll-to';\nimport setStyle from './dom/set-style';\n\nimport formatAmount from './format/format-amount';\nimport formatBankCard from './format/format-bank-card';\nimport formatDate from './format/format-date';\nimport formatRemainTime from './format/format-remain-time';\nimport formatTel from './format/format-tel';\n\nimport compose from './function/compose';\nimport debounce from './function/debounce';\nimport throttle from './function/throttle';\n\nimport optimizeImage from './image/optimize-image';\n\nimport getType from './lang/get-type';\nimport isArray from './lang/is-array';\nimport isBoolean from './lang/is-boolean';\nimport isEmpty from './lang/is-empty';\nimport isFunction from './lang/is-function';\nimport isMap from './lang/is-map';\nimport isNumber from './lang/is-number';\nimport isObject from './lang/is-object';\nimport isSet from './lang/is-set';\nimport isString from './lang/is-string';\n\nimport extend from './object/extend';\nimport merge from './object/merge';\nimport omit from './object/omit';\nimport pick from './object/pick';\n\nimport randomA2B from './random/random-a2b';\nimport randomColor from './random/random-color';\nimport randomString from './random/random-string';\nimport uuid from './random/uuid';\n\nimport camelize from './string/camelize';\nimport dasherize from './string/dasherize';\nimport getBase64Size from './string/get-base64-size';\nimport stripTags from './string/strip-tags';\nimport underscored from './string/underscored';\nimport xssFilter from './string/xxs-filter';\n\nimport getHashParams from './url/get-hash-params';\nimport getHashParam from './url/get-hash-param';\nimport getSearchParams from './url/get-search-params';\nimport getSearchParam from './url/get-search-param';\nimport parseQuery from './url/parse-query';\nimport stringifyQuery from './url/stringify-query';\n\nexport {\n  // array\n  chunk,\n  // browser\n  requestAnimFrame,\n  cancelAnimFrame,\n  // device\n  isAndroid,\n  isIOS,\n  isIPad,\n  isIPhone,\n  isNotchIPhone,\n  isWeixin,\n  ua,\n  // dom\n  getPageHeight,\n  getPageWidth,\n  getPageScrollTop,\n  getStyle,\n  getViewHeight,\n  getViewWidth,\n  isElementVisible,\n  lockTouch,\n  outlineElements,\n  putCursorAtEnd,\n  scrollTo,\n  setStyle,\n  // format\n  formatAmount,\n  formatBankCard,\n  formatDate,\n  formatRemainTime,\n  formatTel,\n  // function\n  compose,\n  debounce,\n  throttle,\n  // image\n  optimizeImage,\n  // lang\n  getType,\n  isArray,\n  isBoolean,\n  isEmpty,\n  isFunction,\n  isMap,\n  isNumber,\n  isObject,\n  isSet,\n  isString,\n  // object\n  extend,\n  merge,\n  omit,\n  pick,\n  // random\n  randomA2B,\n  randomColor,\n  randomString,\n  uuid,\n  // string\n  camelize,\n  dasherize,\n  getBase64Size,\n  stripTags,\n  underscored,\n  xssFilter,\n  // url\n  getHashParams,\n  getHashParam,\n  getSearchParams,\n  getSearchParam,\n  parseQuery,\n  stringifyQuery,\n};\n\nconst tars = {\n  // array\n  chunk,\n  // browser\n  requestAnimFrame,\n  cancelAnimFrame,\n  // device\n  isAndroid,\n  isIOS,\n  isIPad,\n  isIPhone,\n  isNotchIPhone,\n  isWeixin,\n  ua,\n  // dom\n  getPageHeight,\n  getPageWidth,\n  getPageScrollTop,\n  getStyle,\n  getViewHeight,\n  getViewWidth,\n  isElementVisible,\n  lockTouch,\n  outlineElements,\n  putCursorAtEnd,\n  scrollTo,\n  setStyle,\n  // format\n  formatAmount,\n  formatBankCard,\n  formatDate,\n  formatRemainTime,\n  formatTel,\n  // function\n  compose,\n  debounce,\n  throttle,\n  // image\n  optimizeImage,\n  // lang\n  getType,\n  isArray,\n  isBoolean,\n  isEmpty,\n  isFunction,\n  isMap,\n  isNumber,\n  isObject,\n  isSet,\n  isString,\n  // object\n  extend,\n  merge,\n  omit,\n  pick,\n  // random\n  randomA2B,\n  randomColor,\n  randomString,\n  uuid,\n  // string\n  camelize,\n  dasherize,\n  getBase64Size,\n  stripTags,\n  underscored,\n  xssFilter,\n  // url\n  getHashParams,\n  getHashParam,\n  getSearchParams,\n  getSearchParam,\n  parseQuery,\n  stringifyQuery,\n};\n\nexport default tars;\n"],"names":["chunk","arr","size","Array","from","length","Math","ceil","_v","i","slice","lastTime","fallback","callback","now","Date","nextTime","max","setTimeout","requestAnimFrame","window","requestAnimationFrame","webkitRequestAnimationFrame","cancelAnimFrame","id","cancelAnimationFrame","webkitCancelAnimationFrame","clearTimeout","lower","navigator","userAgent","toLowerCase","isAndroid","test","ua","isIOS","isIPad","isIPhone","isNotchIPhone","devicePixelRatio","screen","width","height","dpr","some","item","isWeixin","root","document","documentElement","body","getPageHeight","scrollHeight","clientHeight","getPageWidth","scrollWidth","clientWidth","getPageScrollTop","scrollTop","getStyle","el","ruleName","getComputedStyle","getViewHeight","getViewWidth","elementIsVisibleInViewport","partiallyVisible","getBoundingClientRect","top","left","bottom","right","innerHeight","innerWidth","lockTouch","not","e","tag","target","tagName","toUpperCase","preventDefault","addEventListener","randomColor","random","toString","outlineElements","querySelectorAll","forEach","style","outline","putCursorAtEnd","focus","setSelectionRange","len","value","scrollTo","to","duration","endCallback","difference","abs","step","scroll","start","end","d","setStyle","val","formatAmount","amount","num","Number","isNaN","toFixed","replace","formatBankCard","bankCard","separator","str","formatTime","time","format","defaults","year","month","date","day","hour","minute","second","millisecond","t","map","result","k","RegExp","v","$1","formatDate","getFullYear","getMonth","getDate","getHours","getMinutes","getSeconds","getMilliseconds","formatRemainTime","remain","floor","formatTel","tel","$2","$3","compose","funcs","arg","reduce","a","b","getType","Object","prototype","call","isObject","obj","debounce","func","wait","options","lastArgs","lastThis","maxWait","timerId","lastCallTime","lastInvokeTime","leading","maxing","trailing","TypeError","invokeFunc","args","thisArg","undefined","apply","leadingEdge","timerExpired","shouldInvoke","timeSinceLastCall","trailingEdge","timeSinceLastInvoke","timeWaiting","min","remainingWait","debounced","isInvoking","this","cancel","flush","throttle","optimizeImage","image","quality","maxWidth","mimeType","Promise","resolve","reject","File","reader","FileReader","onload","toBlob","readAsDataURL","data","type","match","isArray","virtualImage","Image","src","naturalWidth","naturalHeight","round","canvas","createElement","getContext","drawImage","blob","Error","isBoolean","bool","isEmpty","keys","isFunction","isMap","isNumber","number","isSet","set","isString","extend","objects","acc","_a","merge","hasOwnProperty","concat","omit","filter","includes","key","pick","cur","randomA2B","int","randomString","chars","charAt","uuid","c","r","camelize","indexOf","underscored","dasherize","getBase64Size","base64","strLen","fileSize","stripTags","xssFilter","getParams","query","getHashParams","url","location","href","URL","hash","getHashParam","getSearchParams","search","getSearchParam","parseQuery","substr","substring","lastIndexOf","split","pair","decodeURIComponent","stringifyQuery","pairs","encodeURIComponent","push","join","tars","isElementVisible"],"mappings":"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"}